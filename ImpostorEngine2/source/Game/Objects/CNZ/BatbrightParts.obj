
var IsLight:bool;
var AnimationData:int16_t[14];

event Create() {
    Active = true;
    Priority = true;

    W = 16;
    H = 16;
    VisW = 16;
    VisH = 16;
    Gravity = 0;
    Frame = 0;
    IsLight = false;
    
    // Animation Timer Data for Subobject:
    // 3, $1D, 4, 2, 3, 1, 4, 2, 3, $E, 4, 2, $FC, 0
    
    AnimationData[0] = 3;
    AnimationData[1] = 29; // 0x1D
    AnimationData[2] = 4;
    AnimationData[3] = 2;
    AnimationData[4] = 3;
    AnimationData[5] = 1;
    AnimationData[6] = 4;
    AnimationData[7] = 2;
    AnimationData[8] = 3;
    AnimationData[9] = 14; // 0xE
    AnimationData[10] = 4;
    AnimationData[11] = 2;
    AnimationData[12] = -4; // 0xFC
    AnimationData[13] = 0;
    
    VisualLayer = 1;
}

event Update() {
    MoveWithParent();
    IsLight = (CurrentAnimation == 37);
    if (!IsLight) {
        Y += 3;
        Frame = 1;
    } 
    //else if (IsLight) {
    //    DelayedAnimationProgress(AnimationData);
    //}
    
}

event Render(CamX:int, CamY:int) {
    G.DrawSprite(Sprite, CurrentAnimation, Frame, X - CamX, Y - CamY, 0, IE_NOFLIP);
}