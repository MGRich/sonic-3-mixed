object 0x255;

subclass Enemy;

event Create() {
    Active = true;
    Priority = false;

    W = 16;
    H = 16;

    HitCount = 3;

    Boss = true;

    Timer = 0;
    Radius = 8;

    VisualLayer = 1;
}

event Update() {
    Invincible = false;
    Harmful = true;
    if (Timer > 0) {
        Invincible = true;
        Harmful = false;
        Timer--;
    }
}
event OnHit() : int {
    Timer = 0x20;

    HitCount -= 1;
    if (HitCount == 0) {
        HitCount = -1;
        return OnDeath();
    }
    return 0;
}

event OnDeath():int {
    Scene.LevelTriggerFlag = (SubType + 1);
    return Enemy.OnDeath();
}

event Render(CamX:int, CamY:int) {
    G.DrawSprite(Sprite, 3, 1, X - CamX, Y - CamY, 0, FlipX ? IE_FLIPX : IE_NOFLIP);
}
